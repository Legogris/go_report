<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
    <title>Go Report Card | A Gopher Gala Hackathon Product</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
    <style>
    /* Page header 
    -------------------------------------------------- */
    .header {
      text-align: center;
    }
    .header h2 {
      font-size: 3em;
    }
    .input-row {
      margin-top: 20px;
    }
    .input-row input.input-box {
        width: 100%;
        height: 46px;
    }
    .btn-test {
        width: 100%;
    }
    .url label {
        z-index: 2;
        position: absolute;
        line-height: 46px;
        font-weight: normal;
        color: rgb(51, 51, 51);
        font-weight: 200;
    }
    .url input {
        position: absolute;
        right: 0;
        z-index: 1;
        margin-left: -190px;
        padding-left: 190px;
    }

    /* Results section
    -------------------------------------------------- */
    .results {
      width: 100%;
    }
    .results .head-row {
      cursor: pointer;
    }
    .results .cell-description {
      width: 30%;
    }
    .results .cell-progress-bar {
      width: 70%;
    }
    .results .files, .results .errors {
      padding-left: 0;
    }
    .results .files .file {
      list-style-type: none;
      padding-left: 0;
    }
    .results .files .errors .error {
      list-style-type: none;
      padding-left: 4em;
      margin: 1em 0;
    }
    .results .progress {
      margin-bottom: 0;
    }

    /* Partials section
    -------------------------------------------------- */
    #partials {
      display: none;
    }
    .alert {
      margin-bottom: 0;
    }
    .gopher {
      width: 150px;
    }

    /* Footer section!
    -------------------------------------------------- */
    .footer-text {
      text-align: center;
      line-height: 4em;
    }

    /* Sticky footer
    -------------------------------------------------- */
    html {
      position: relative;
      min-height: 100%;
    }
    body {
      /* Margin bottom by footer height */
      margin-bottom: 60px;
    }
    .footer {
      position: absolute;
      bottom: 0;
      width: 100%;
      /* Set the fixed height of the footer here */
      height: 60px;
      background-color: #f5f5f5;
    }
    </style>
</head>
<body>
  <div id="notifications">
  </div>
  <div class="jumbotron">
    <div class="container">
      <div class="row header">
        <div class="col-md-8 col-md-offset-2">
          <h2 class="title">Go Report Card</h2>
          <p class="description">Enter the <strong>Github URL</strong> below to generate a report on the quality of the Go code in the project</p>
        </div>
      </div>
      <div class="row input-row">
        <div class="col-md-8 col-md-offset-2">
          <form method="POST" action="/checks" id="check-form">
            <div class="col-md-9">
              <p class="url">
                <label>https://github.com/</label><input name="url" type="text" class="input-box" placeholder="gophergala/go_report"/>
              </p>
            </div>
            <div class="col-md-3">
              <button type="submit" class="btn btn-primary btn-lg" href="#" role="button" class="btn-test">Test Now</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row container-gopher">
      <div class="col-md-12 text-center">
        <img src="/assets/gopherhat.jpg" class="gopher" />
      </div>
    </div>
    <div class="row container-results hidden">
      <div class="col-md-10 col-md-offset-1">
        <table class="table table-hover results">
        </table>
      </div>
    </div>
  </div>
  <div class="footer">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <p class="footer-text">
          Made by 
            <a href="https://twitter.com/shawnps">@shawnps</a>, 
            <a href="https://twitter.com/legogris">@legogris</a>, 
            <a href="https://twitter.com/dallarosajp">@dallarosajp</a> and 
            <a href="https://twitter.com/ironzeb">@ironzeb</a> during the 2014 <a href="http://gophergala.com">Gopher Gala</a> Hackathon. The Go Gopher was created by <a href="http://reneefrench.blogspot.com/">Ren√©e French</a>
          </p>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.js"></script>
  <script id="template-alert" type="text/x-handlebars-template">
    <div class="alert alert-warning alert-dismissible" role="alert">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="message">
      {{{message}}}
      </div>
    </div>
  </script>
  <script id="template-check" type="text/x-handlebars-template">
    <tr class="head-row">
      <td class="cell-description">
        {{{name}}}
      </td>
      <td class="cell-progress-bar">
        <div class="progress">
          <div class="progress-bar progress-bar-{{color percentage}}" role="progressbar" aria-valuenow="{{percentage}}" aria-valuemin="0" aria-valuemax="100" style="width: {{percentage}}%;">
            {{percentage}}%
          </div>
        </div>
      </td>
    </tr>
  </script>
  <script id="template-details" type="text/x-handlebars-template">
    <tr class="details-row hidden">
      <td colspan="2">
        <div class="wrapper">
        {{#each errors}}
          <ul class="files">
            <li class="file">
              <ul class="errors">
              {{@key}}
              {{#each this}}
                <li class="error">{{this}}</li>
              {{/each}}
              </ul>
            </li>
          </ul>
        {{/each}}
        </div>
      </td>
    </tr>
  </script>
  <script type="text/javascript">
    var loading = false;

    // add a helper for picking the progress bar colors
    Handlebars.registerHelper('color', function(percentage, options) {
      switch(true){
        case percentage < 30:
          return 'danger';
        case percentage < 50:
          return 'warning';
        case percentage < 80:
          return 'info';
        default:
          return 'success';
      };
    });

    // initialize handlebars templates
    var templates = {};
    $("script[id^=template]").each(function(){
      var name = $(this).attr("id").substring(9);
      var source   = $(this).html();
      templates[name] = Handlebars.compile(source);
    });

    var shrinkHeader = function(){
      var $header = $(".header");
      $header.find(".title, .description").slideUp();
    }

    function spinGopher(){
      if (!loading) {
        return false;
      };
      var $gopher = $(".gopher"),
          angle = 360;
      $({deg: 0}).animate({deg: angle}, {
        duration: 1000,
        step: function(now) {
          $gopher.css({
              transform: 'rotate(' + now + 'deg)'
          });
        },
        easing: 'linear',
        always: spinGopher
      });
      return true;
    }

    function hideGopher(){
      $(".container-gopher").hide();
    }

    function showGopher(){
      $(".container-gopher").show();
      spinGopher();
    }

    var populateResults = function(checks){
        var $table = $(".table.results");
        $table.empty();
        for (var i = 0; i < checks.length; i++) {
            checks[i].percentage = parseInt(checks[i].percentage * 100.0);
            var $headRow = $(templates.check(checks[i]));
            $headRow.on("click", function(){
              $(this).next(".details-row").toggleClass('hidden');
              
            });
            $headRow.appendTo($table);

            var $details = $(templates.details(checks[i]));
            $details.appendTo($table);
        }
        $(".container-results").removeClass('hidden').slideDown();
    };

    var hideResults = function(){
      $(".container-results").hide();
    }

    // handle form submission
    $("form#check-form").submit(function(){
      loading = true;
      var $form = $(this),
          url = $form.attr("action"),
          method = $form.attr("method"),
          data = {};
      shrinkHeader();
      hideResults();
      showGopher();
      $form.serializeArray().map(function(x){data[x.name] = x.value;}); 
      $.ajax({
          type: method,
          url: url,
          data: data,
          dataType: "json"
      }).fail(function(xhr, status, err){;
          var html = templates.alert({message: "<strong>Oops!</strong> There was an error processing your request: " + err});
          var $alert = $(html);
          $alert.on("click", function(){
            $(this).closest(".alert").remove();
          });
          $alert.hide();
          $alert.appendTo("#notifications");
          $alert.slideDown();
      }).done(function(data, textStatus, jqXHR){
          hideGopher();
          populateResults(data.checks);
      }).always(function(){
          loading = false;
      });
      return false;
    });

    hideGopher();
    populateResults([{"name":"gocyclo","errors":{},"percentage":1},{"name":"golint","errors":{"repos/src/github.com/gojp/nihongo/app/controllers/app.go":["repos/src/github.com/gojp/nihongo/app/controllers/app.go:20:6: exported type App should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/controllers/app.go:25:6: exported type Word should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/controllers/app.go:29:6: exported type ByCommon should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/controllers/app.go:35:6: exported type PopularSearch should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/controllers/app.go:65:1: exported method App.Search should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/controllers/app.go:65:1: receiver name a should be consistent with previous receiver name c for App","repos/src/github.com/gojp/nihongo/app/controllers/app.go:82:1: exported method App.Details should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/controllers/app.go:118:1: exported method App.SearchGet should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/controllers/app.go:125:1: exported method App.About should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/controllers/app.go:129:1: exported method App.Resources should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/controllers/app.go:133:1: exported method App.SavePhrase should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/controllers/app.go:133:1: receiver name a should be consistent with previous receiver name c for App","repos/src/github.com/gojp/nihongo/app/controllers/app.go:177:1: exported method App.Register should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/controllers/app.go:182:1: exported method App.LoginPage should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/controllers/app.go:187:1: exported method App.Profile should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/controllers/app.go:193:1: exported method App.SaveUser should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/controllers/app.go:209:10: if block ends with a return statement, so drop this else and outdent its block","repos/src/github.com/gojp/nihongo/app/controllers/app.go:228:1: exported method App.Login should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/controllers/app.go:244:1: exported method App.Logout should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/controllers/app.go:251:1: exported method App.Index should have comment or be unexported"],"repos/src/github.com/gojp/nihongo/app/helpers/search.go":["repos/src/github.com/gojp/nihongo/app/helpers/search.go:26:1: exported function Search should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/helpers/search.go:101:2: var searchJson should be searchJSON","repos/src/github.com/gojp/nihongo/app/helpers/search.go:135:2: var searchJson should be searchJSON"],"repos/src/github.com/gojp/nihongo/app/models/edict.go":["repos/src/github.com/gojp/nihongo/app/models/edict.go:7:6: exported type WordModel should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/models/edict.go:17:6: exported type SearchTerm should have comment or be unexported"],"repos/src/github.com/gojp/nihongo/app/models/gloss.go":["repos/src/github.com/gojp/nihongo/app/models/gloss.go:3:6: exported type Gloss should have comment or be unexported"],"repos/src/github.com/gojp/nihongo/app/models/user.go":["repos/src/github.com/gojp/nihongo/app/models/user.go:10:6: exported type User should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/models/user.go:22:1: exported method User.Validate should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/models/user.go:22:1: receiver name user should be consistent with previous receiver name u for User","repos/src/github.com/gojp/nihongo/app/models/user.go:28:1: exported function ValidatePassword should have comment or be unexported"],"repos/src/github.com/gojp/nihongo/app/models/word.go":["repos/src/github.com/gojp/nihongo/app/models/word.go:10:6: exported type Word should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/models/word.go:26:1: comment on exported method Word.HighlightQuery should be of the form \"HighlightQuery ...\""],"repos/src/github.com/gojp/nihongo/app/routes/routes.go":["repos/src/github.com/gojp/nihongo/app/routes/routes.go:1:1: package comment should be of the form \"Package routes ...\"","repos/src/github.com/gojp/nihongo/app/routes/routes.go:8:5: exported var App should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/routes/routes.go:11:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:20:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:29:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:36:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:43:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:50:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:59:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:66:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:73:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:80:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:89:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:100:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:107:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:116:5: exported var Static should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/routes/routes.go:119:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:130:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:145:5: exported var TestRunner should have comment or be unexported","repos/src/github.com/gojp/nihongo/app/routes/routes.go:148:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:155:1: receiver name should not be an underscore","repos/src/github.com/gojp/nihongo/app/routes/routes.go:166:1: receiver name should not be an underscore"],"repos/src/github.com/gojp/nihongo/tests/apptest.go":["repos/src/github.com/gojp/nihongo/tests/apptest.go:12:6: exported type Word should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/apptest.go:16:6: exported type PopularSearch should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/apptest.go:20:6: exported type ScoreWord should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/apptest.go:36:6: exported type AppTest should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/apptest.go:40:1: exported method AppTest.Before should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/apptest.go:43:1: exported method AppTest.TestThatIndexPageWorks should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/apptest.go:49:1: exported method AppTest.TestThatHelloSearchPageWorks should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/apptest.go:55:1: exported method AppTest.TestThatKonnichiwaSearchPageWorks should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/apptest.go:61:1: exported method AppTest.TestThatDoublePlusSearchWorks should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/apptest.go:67:1: exported method AppTest.TestSearchResults should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/apptest.go:93:1: exported method AppTest.TestSearchResultScores should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/apptest.go:112:1: exported method AppTest.After should have comment or be unexported"],"repos/src/github.com/gojp/nihongo/tests/helperstest.go":["repos/src/github.com/gojp/nihongo/tests/helperstest.go:8:6: exported type HelpersTest should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/helperstest.go:12:1: exported method HelpersTest.Before should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/helperstest.go:15:1: exported method HelpersTest.After should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/helperstest.go:18:1: exported method HelpersTest.TestMakeStrong should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/helperstest.go:23:1: exported method HelpersTest.TestConvertQueryToKana should have comment or be unexported"],"repos/src/github.com/gojp/nihongo/tests/modelstest.go":["repos/src/github.com/gojp/nihongo/tests/modelstest.go:8:6: exported type ModelsTest should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/modelstest.go:12:1: exported method ModelsTest.Before should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/modelstest.go:15:1: exported method ModelsTest.After should have comment or be unexported","repos/src/github.com/gojp/nihongo/tests/modelstest.go:18:1: exported method ModelsTest.TestHighlightQuery should have comment or be unexported"]},"percentage":0.2857142857142857},{"name":"goimports","errors":{"repos/src/github.com/gojp/nihongo/app/routes/routes.go":["repos/src/github.com/gojp/nihongo/app/routes/routes.go"]},"percentage":0.9285714285714286},{"name":"go_vet","errors":{"repos/src/github.com/gojp/nihongo/tests/apptest.go":["repos/src/github.com/gojp/nihongo/tests/apptest.go:106: Println call ends with newline"]},"percentage":0.9285714285714286},{"name":"gofmt","errors":{"repos/src/github.com/gojp/nihongo/app/controllers/app.go":["repos/src/github.com/gojp/nihongo/app/controllers/app.go"],"repos/src/github.com/gojp/nihongo/app/routes/routes.go":["repos/src/github.com/gojp/nihongo/app/routes/routes.go"],"repos/src/github.com/gojp/nihongo/tests/apptest.go":["repos/src/github.com/gojp/nihongo/tests/apptest.go"],"repos/src/github.com/gojp/nihongo/tests/search_test.go":["repos/src/github.com/gojp/nihongo/tests/search_test.go"]},"percentage":0.7142857142857143}]);
  </script>
</body>
</html>
